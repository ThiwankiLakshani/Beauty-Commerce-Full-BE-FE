{% extends "base.html" %}
{% block title %}Categories â€” Admin{% endblock %}
{% block content %}
  <div class="bg-white/95 backdrop-blur shadow-soft border border-emerald-50 rounded-2xl p-6">

    <!-- Header -->
    <div class="flex items-center justify-between gap-3">
      <h1 class="text-2xl font-bold text-slate-800">Categories</h1>
      <a href="{{ url_for('categories_new') }}"
         class="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-white bg-emerald-600 hover:bg-emerald-700 focus-visible:ring-2 focus-visible:ring-emerald-300 transition">
        <!-- plus icon -->
        <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"/></svg>
        New Category
      </a>
    </div>

    <!-- Table -->
    <div class="mt-5 overflow-x-auto">
      <table class="min-w-full text-sm">
        <thead class="text-left text-slate-500">
          <tr class="border-b border-slate-100">
            <th class="py-2.5 pr-4">Name</th>
            <th class="py-2.5 pr-4">Slug</th>
            <th class="py-2.5 pr-4">Item Types</th>
            <th class="py-2.5 pr-4">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
          {% for c in categories %}
            <tr class="hover:bg-slate-50/60">
              <td class="py-2.5 pr-4">
                <div class="inline-flex items-center gap-2">
                  <!-- folder icon -->
                  <span class="h-7 w-7 rounded-lg bg-emerald-600/10 text-emerald-700 grid place-items-center">
                    <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path d="M2 6a2 2 0 012-2h4l2 2h6a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/></svg>
                  </span>
                  <span class="font-medium text-slate-800">{{ c.name }}</span>
                </div>
              </td>

              <td class="py-2.5 pr-4">
                <span class="inline-flex items-center px-2.5 py-1 rounded-md font-mono text-xs bg-slate-100 text-slate-700">
                  {{ c.slug }}
                </span>
              </td>

              <td class="py-2.5 pr-4">
                {% set _types = (c.item_types or []) %}
                {% if _types and _types|length > 0 %}
                  <div class="flex flex-wrap gap-1.5 max-w-xl">
                    {% for t in _types %}
                      <span class="inline-block px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800">{{ t }}</span>
                    {% endfor %}
                  </div>
                {% else %}
                  <span class="text-slate-500">-</span>
                {% endif %}
              </td>

              <td class="py-2.5 pr-4">
                <div class="flex items-center gap-2">
                  <a href="{{ url_for('categories_edit', cid=c._id) }}"
                     class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border border-slate-200 bg-white text-slate-700 hover:bg-slate-50">
                    <!-- pencil -->
                    <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793z"/><path d="M4 13.5V16h2.5l7.086-7.086-2.5-2.5L4 13.5z"/></svg>
                    Edit
                  </a>
                  <form method="post" action="{{ url_for('categories_delete', cid=c._id) }}"
                        onsubmit="return confirm('Delete this category?');">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit"
                            class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border border-red-200 bg-white text-red-700 hover:bg-red-50">
                      <!-- trash -->
                      <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path d="M6 7a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1zm4 0a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1zm4 0a1 1 0 011 1v7a1 1 0 11-2 0V8a1 1 0 011-1z"/><path d="M4 5a1 1 0 011-1h3l1-1h2l1 1h3a1 1 0 110 2H5a1 1 0 01-1-1z"/></svg>
                      Delete
                    </button>
                  </form>
                </div>
              </td>
            </tr>
          {% else %}
            <tr>
              <td colspan="4" class="py-10">
                <div class="flex flex-col items-center justify-center text-center">
                  <div class="h-12 w-12 rounded-2xl bg-emerald-600/10 flex items-center justify-center mb-3">
                    <!-- empty folder icon -->
                    <svg class="w-6 h-6 text-emerald-700" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6a2 2 0 012-2h4l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"/></svg>
                  </div>
                  <p class="text-slate-700 font-medium">No categories yet</p>
                  <p class="text-slate-500 text-sm">Create your first category to organize products.</p>
                  <a href="{{ url_for('categories_new') }}"
                     class="mt-3 inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-white bg-emerald-600 hover:bg-emerald-700">
                    <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor"><path d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"/></svg>
                    New Category
                  </a>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
{% endblock %}
